<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.wzw.springboot.dao.mapping.BookMapper" >
  <resultMap id="BaseResultMap" type="com.wzw.springboot.dao.pojo.Book" >
    <!--
      WARNING - @mbg.generated
    -->
    <result column="bid" property="bid" jdbcType="INTEGER" />
    <result column="bname" property="bname" jdbcType="VARCHAR" />
    <result column="detail" property="detail" jdbcType="VARCHAR" />
    <result column="pirce" property="pirce" jdbcType="VARCHAR" />
    <result column="writer" property="writer" jdbcType="VARCHAR" />
    <result column="printer" property="printer" jdbcType="VARCHAR" />
    <result column="date" property="date" jdbcType="DATE" />
    <result column="type" property="type" jdbcType="VARCHAR" />
    <result column="image" property="image" jdbcType="VARCHAR" />
    <result column="stock" property="stock" jdbcType="INTEGER" />
  </resultMap>

  <insert id="insert1" parameterType="com.wzw.springboot.domain.BookEntity">
    insert into t_goods_info
    (goods_name,goods_price)
    values
    (#{book.bname},#{book.pirce})
  </insert>

  <delete id="deleteById">
    delete from book
    where bid=#{id}
  </delete>

  <update id="updateBook">
    update book set bname=#{name}
      <if test="id != null and name != null">
          <where>
            bid=#{id}
          </where>
      </if>

  </update>

  <select id="selectByIdOrName" resultType="com.wzw.springboot.dao.pojo.Book">
    select * from book
    <where>
      <choose>
        <when test="id != null">
            and bid=#{id}
        </when>
        <otherwise>
           and bname=#{name}
        </otherwise>
      </choose>
    </where>
  </select>

  <select id="selectByIdList" resultType="com.wzw.springboot.dao.pojo.Book">
    select * from book
    <if test="listId!=null and listId.length>0">
      where bid in
      <foreach collection="array" open="(" close=")" item="id" separator=",">
        #{id}
      </foreach>
    </if>
  </select>

  <select id="selectByEn" resultType="com.wzw.springboot.dao.pojo.Book">
    select * from book
    <if test="bookEntity!= null ">
      where bname like concat (#{bookEntity.bname},'%')
    </if>
  </select>
</mapper>